
# Compliance Bot Pro ‚Äî RAG + Guardrails + GigaChat (Streamlit)

**Compliance‚Äë–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç**: –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤/–∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º –∏ –ø—Ä–æ–¥—É–∫—Ç–∞–º –±–∞–Ω–∫–∞, _–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ_ —Ü–∏—Ç–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∏, —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç PII/–∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–µ —Ç–µ–º—ã –∏ —Å–∞–º‚Äë–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ–±—è ¬´—Å—É–¥—å—ë–π¬ª LLM. –ü–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **GigaChat**, Streamlit –∏ –≥–∏–±—Ä–∏–¥–Ω–æ–º –ø–æ–∏—Å–∫–µ (TF‚ÄëIDF + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏).

<p align="center">
  <img src="https://img.shields.io/badge/RAG-FAISS%20%7C%20TF--IDF-blue" />
  <img src="https://img.shields.io/badge/Guardrails-PII%20%7C%20Policy-green" />
  <img src="https://img.shields.io/badge/Provider-GigaChat-black" />
  <img src="https://img.shields.io/badge/UI-Streamlit-ff4b4b" />
</p>

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫**: TF‚ÄëIDF + —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ (cosine), –ø–æ–∑–¥–Ω–µ–µ —Å–ª–∏—è–Ω–∏–µ (Reciprocal Rank Fusion) –∏ –ª—ë–≥–∫–∏–π re‚Äërank —Ç–æ–ø‚Äë–ø–∞—Å—Å–∞–∂–µ–π.  
- **–¶–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**: –∫–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫/—Ñ–∞–π–ª–æ–≤ –∏ —Ü–∏—Ç–∞—Ç—ã.  
- **Guardrails (–ø–æ–ª–∏—Ç–∏–∫–∏)**: 
  - PII‚Äë—Ñ–∏–ª—å—Ç—Ä—ã (—Ç–µ–ª–µ—Ñ–æ–Ω/–ø–∞—Å–ø–æ—Ä—Ç/–∫–∞—Ä—Ç–∞/–ò–ù–ù –∏ —Ç.–¥., regex + —ç–≤—Ä–∏—Å—Ç–∏–∫–∏),  
  - –∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Ç–µ–º—ã/—Ñ—Ä–∞–∑—ã, 
  - –ª–∏–º–∏—Ç—ã –¥–ª–∏–Ω—ã –∏ –∑–∞–ø—Ä–µ—Ç –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ —Ü–∏—Ç–∞—Ç.  
- **LLM‚ÄëJudge**: –ø–æ—Å—Ç‚Äë–æ—Ü–µ–Ω–∫–∞ –æ—Ç–≤–µ—Ç–∞ (groundedness, harmfulness, PII‚Äëleakage). –ü—Ä–∏ –Ω–∏–∑–∫–æ–º –±–∞–ª–ª–µ ‚Äî —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –∂—ë—Å—Ç–∫–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º.  
- **–ò—Å—Ç–æ—Ä–∏—è –∏ –∂—É—Ä–Ω–∞–ª**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π, –ø–æ–ª–Ω—ã–π –ª–æ–≥ –ø–∞–π–ø–ª–∞–π–Ω–∞, —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞.  
- **Plug‚Äëand‚Äëplay –∫–æ–Ω—Ç–µ–Ω—Ç**: –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤—å `.md`/`.txt` –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ `samples/knowledge/` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.  
- **–¢–æ–ª—å–∫–æ GigaChat**: –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π —Å—Ä–µ–¥–µ.

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Streamlit ‚îÇ  ‚Üí   ‚îÇ  Retriever   ‚îÇ  ‚Üí   ‚îÇ  LLM Core ‚îÇ  ‚Üí   ‚îÇ LLM‚ÄëJudge   ‚îÇ
‚îÇ   (UI)     ‚îÇ      ‚îÇ(TF‚ÄëIDF+Emb)  ‚îÇ      ‚îÇ(GigaChat) ‚îÇ      ‚îÇ (GigaChat)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ                     ‚îÇ                  ‚îÇ                   ‚îÇ
      ‚îÇ             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îÇ             ‚îÇ   Reranker    ‚îÇ         ‚îÇ           ‚îÇ Guardrails/PII  ‚îÇ
      ‚îÇ             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îÇ           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
      ‚îÇ                     ‚îÇ                  ‚îÇ                    ‚îÇ
      ‚îÇ             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí  ‚îÇ  Context Pack ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí  ‚îÇ  Policy Enforce ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1) –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Linux/Mac)
export GIGACHAT_AUTH_KEY="base64(ClientID:ClientSecret)"
export GIGACHAT_SCOPE="GIGACHAT_API_PERS"
export GIGACHAT_MODEL="GigaChat-Pro"
export GIGACHAT_VERIFY="false"   # –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É TLS

streamlit run streamlit_app.py
```

> **–í–∞–∂–Ω–æ:** –∑–Ω–∞—á–µ–Ω–∏–µ `GIGACHAT_AUTH_KEY` ‚Äî —ç—Ç–æ **Authorization Key** –∏–∑ –∫–∞–±–∏–Ω–µ—Ç–∞ GigaChat (base64 –æ—Ç `ClientID:ClientSecret`).

### 2) –î–µ–ø–ª–æ–π –Ω–∞ Streamlit Cloud

1. –ó–∞–ª–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∫–æ—Ä–Ω–µ–º ‚Äî `streamlit_app.py`).  
2. –í **Settings ‚Üí Secrets** –¥–æ–±–∞–≤—å:
   ```toml
   GIGACHAT_AUTH_KEY="base64(ClientID:ClientSecret)"
   GIGACHAT_SCOPE="GIGACHAT_API_PERS"
   GIGACHAT_MODEL="GigaChat-Pro"
   GIGACHAT_VERIFY="false"
   ```
3. Entry point: `streamlit_app.py`. –ì–æ—Ç–æ–≤–æ.

---

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
compliance-bot-pro/
‚îú‚îÄ streamlit_app.py                 # UI –∏ —Å—Ü–µ–Ω–∞—Ä–∏–∏
‚îú‚îÄ requirements.txt
‚îú‚îÄ README.md
‚îú‚îÄ prompts/
‚îÇ  ‚îú‚îÄ system.txt                    # —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
‚îÇ  ‚îî‚îÄ judge.txt                     # –ø—Ä–æ–º–ø—Ç LLM‚Äë—Å—É–¥—å–∏
‚îú‚îÄ src/
‚îÇ  ‚îú‚îÄ providers/
‚îÇ  ‚îÇ  ‚îî‚îÄ gigachat.py                # OAuth + —á–∞—Ç –ø–æ REST
‚îÇ  ‚îú‚îÄ rag/
‚îÇ  ‚îÇ  ‚îî‚îÄ hybrid.py                  # –∏–Ω–¥–µ–∫—Å, –ø–æ–∏—Å–∫, —Å–ª–∏—è–Ω–∏–µ, rerank
‚îÇ  ‚îî‚îÄ guardrails/
‚îÇ     ‚îú‚îÄ rules.py                   # PII‚Äë–¥–µ—Ç–µ–∫—Ç–æ—Ä, –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ     ‚îî‚îÄ policy.yml                 # –ø–æ–ª–∏—Ç–∏–∫–∞ (–∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Ç–µ–º—ã, –ª–∏–º–∏—Ç—ã, must_cite)
‚îî‚îÄ samples/
   ‚îî‚îÄ knowledge/                    # –≤–∞—à–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (.md/.txt)
      ‚îú‚îÄ card_block.md
      ‚îú‚îÄ fees_premium.md
      ‚îî‚îÄ ...
```

---

## üìö –ó–Ω–∞–Ω–∏—è: –∫–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã

–ü–æ–ª–æ–∂–∏—Ç–µ `.md`/`.txt` —Ñ–∞–π–ª—ã –≤ `samples/knowledge/`. –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–µ:
```markdown
# –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–∞—Ä—Ç—ã
–ö–∞—Ä—Ç—É –º–æ–∂–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏...
```
–ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1) —Ä–∞–∑–±–∏–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ —á–∞–Ω–∫–∏ (–ø–æ –∞–±–∑–∞—Ü–∞–º/–∑–∞–≥–æ–ª–æ–≤–∫–∞–º),  
2) —Å—Ç—Ä–æ–∏—Ç TF‚ÄëIDF –∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–∏,  
3) –∫—ç—à–∏—Ä—É–µ—Ç –∏–Ω–¥–µ–∫—Å.

–ü–æ–ª—è —Ñ–∞–π–ª–∞ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø–æ–∏—Å–∫–µ: **–∑–∞–≥–æ–ª–æ–≤–æ–∫** –¥–æ–±–∞–≤–ª—è–µ—Ç –≤–µ—Å –ø—Ä–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–∏.

---

## üõ°Ô∏è Guardrails (–ø–æ–ª–∏—Ç–∏–∫–∏ –∏ —Ñ–∏–ª—å—Ç—Ä—ã)

–ü–æ–ª–∏—Ç–∏–∫–∞ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ `src/guardrails/policy.yml`:
```yaml
forbidden_phrases:
  - "–∏–Ω–≤–µ—Å—Ç—Å–æ–≤–µ—Ç—ã"
  - "–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å"
require_citations: true
max_answer_tokens: 700

pii_patterns:
  phone: "\\b\\+?7\\d{10}\\b"
  card:  "\\b\\d{4} \\d{4} \\d{4} \\d{4}\\b"
  passport: "\\b\\d{4} \\d{6}\\b"
```

–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:
1. –¥–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø—Ä–æ—Å (–∑–∞–ø—Ä–µ—Ç–Ω—ã–µ —Ç–µ–º—ã, PII‚Äë–≤–≤–æ–¥),  
2. –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç (PII‚Äë—É—Ç–µ—á–∫–∏, –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ü–∏—Ç–∞—Ç—ã, –¥–ª–∏–Ω–∞),  
3. –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ ‚Äî –º—è–≥–∫–∏–π –æ—Ç–∫–∞–∑ + –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã (–∏–ª–∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è).

---

## üîé –ü–æ–∏—Å–∫ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç

- **TF‚ÄëIDF** –±—ã—Å—Ç—Ä–æ –ª–æ–≤–∏—Ç —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏ —Ç–µ—Ä–º–∏–Ω—ã.  
- **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏** (Sentence‚ÄëTransformers) –ø–æ–∫—Ä—ã–≤–∞—é—Ç –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä–æ–≤–∫–∏.  
- **RRF** (Reciprocal Rank Fusion) –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–≤–∞ —Å–ø–∏—Å–∫–∞.  
- **Rerank** –≤–µ–∫—Ç–æ—Ä–Ω—ã–º –∫–æ—Å–∏–Ω—É—Å–æ–º + –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤/–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.  
- –í –∫–æ–Ω—Ç–µ–∫—Å—Ç —É–ø–∞–∫–æ–≤—É—é—Ç—Å—è top‚Äëk –ø–∞—Å—Å–∞–∂–∞ + –∫—Ä–∞—Ç–∫–∏–µ ¬´bullets¬ª –¥–ª—è —Ü–∏—Ç–∞—Ç.

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–≤–∏–¥–∏–º—ã –≤ UI): k –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ k –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.

---

## üßë‚Äç‚öñÔ∏è LLM‚ÄëJudge

–ü–æ—Å–ª–µ –æ—Ç–≤–µ—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç—Å—è ¬´—Å—É–¥—å—è¬ª (–æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç –Ω–∞ GigaChat), –∫–æ—Ç–æ—Ä—ã–π –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç:

- `groundedness` (–æ–ø–∏—Ä–∞–µ—Ç—Å—è –ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏),  
- `harmfulness` (–Ω–∞—Ä—É—à–µ–Ω–∏—è/—Ä–∏—Å–∫),  
- `pii_leakage` (—É—Ç–µ—á–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö),  
- `format_ok` (–µ—Å—Ç—å –ª–∏ —Ü–∏—Ç–∞—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞).

–ï—Å–ª–∏ —Å—É–º–º–∞—Ä–Ω—ã–π –±–∞–ª–ª –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ ‚Äî –≤–∫–ª—é—á–∞–µ—Ç—Å—è —Ä–µ–∂–∏–º **repair**: —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å –±–æ–ª–µ–µ –∂—ë—Å—Ç–∫–∏–º –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´—Ç–æ–ª—å–∫–æ bullets + —Ü–∏—Ç–∞—Ç—ã¬ª).

---

## üß≠ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ UI

- **–°–∞–π–¥–±–∞—Ä**: –ø—Ä–æ–≤–∞–π–¥–µ—Ä GigaChat, –º–æ–¥–µ–ª—å, —Ç–æ–ø‚Äëk, –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ ¬´–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å LLM –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞¬ª, ¬´–í–∫–ª—é—á–∏—Ç—å —Å—É–¥—å—é¬ª, ¬´–¢—Ä–µ–±–æ–≤–∞—Ç—å —Ü–∏—Ç–∞—Ç—ã¬ª.  
- **–ü–æ–ª–µ –∑–∞–ø—Ä–æ—Å–∞**: –Ω–∞–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å.  
- **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø–∞—Å—Å–∞–∂–∏**: –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —Å —Ä–µ–π—Ç–∏–Ω–≥–∞–º–∏.  
- **–û—Ç–≤–µ—Ç**: –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç + —Å–ø–∏—Å–æ–∫ —Ü–∏—Ç–∞—Ç.  
- **–ò—Å—Ç–æ—Ä–∏—è**: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π.  
- **–≠–∫—Å–ø–æ—Ä—Ç**: –æ—Ç—á—ë—Ç (Markdown) —Å –≤–æ–ø—Ä–æ—Å–æ–º, –æ—Ç–≤–µ—Ç–æ–º, —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏ –ª–æ–≥–∞–º–∏.

---

## üõ†Ô∏è –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

- **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏**: –∑–∞–º–µ–Ω–∏—Ç–µ –º–æ–¥–µ–ª—å –≤ `src/rag/hybrid.py` (–ª—é–±–∞—è `sentence-transformers`).  
- **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**: –ø–æ–¥–∫–ª—é—á–∏—Ç–µ FAISS/Chroma ‚Äî –≤ —Ñ–∞–π–ª–µ `hybrid.py` –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.  
- **–ü—Ä–∞–≤–∏–ª–∞**: —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `policy.yml` –∏ `rules.py` (regex, —ç–≤—Ä–∏—Å—Ç–∏–∫–∏).  
- **–ü—Ä–æ–º–ø—Ç—ã**: `prompts/system.txt` –∏ `prompts/judge.txt`.  
- **NeMo Guardrails**: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ **flows** –∏ CDDL ‚Äî –∑–∞–≥–æ—Ç–æ–≤–∫–∏ —É–∂–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã (—Å–º. `rules.py`).

---

## üß™ –ù–∞–±–æ—Ä —Ç–µ—Å—Ç‚Äë–∑–∞–ø—Ä–æ—Å–æ–≤

- ¬´–ö–∞–∫ –ø–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç—É –∏ —Å–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?¬ª  
- ¬´–Ø –±—ã —Ö–æ—Ç–µ–ª –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Å—á—ë—Ç, —á—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?¬ª  
- ¬´–ö–∞–∫ –æ—Å–ø–æ—Ä–∏—Ç—å —Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ –ø–æ–¥–ø–∏—Å–∫–µ?¬ª  
- ¬´–ö–∞–∫–∏–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥—ã –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ —Å—á–µ—Ç–∞–º–∏?¬ª  
- ¬´–ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–∏ –Ω–∞ –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ?¬ª

---

## ‚öôÔ∏è –¢–æ–Ω–∫–æ—Å—Ç–∏ –∏ —Å–æ–≤–µ—Ç—ã

- –ü—Ä–∏ –æ—à–∏–±–∫–µ **SSL** –≤ –æ–±–ª–∞–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GIGACHAT_VERIFY="false"`. –í –ø—Ä–æ–¥–µ –ª—É—á—à–µ –≤–∫–ª—é—á–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É.  
- –û—à–∏–±–∫–∞ `400 Bad Request` –Ω–∞ `/oauth` ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ **Authorization Key** (base64 –∏–º–µ–Ω–Ω–æ `ClientID:ClientSecret`) –∏ `GIGACHAT_SCOPE="GIGACHAT_API_PERS"`.  
- –ï—Å–ª–∏ –ø–∞–º—è—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ ‚Äî —É–º–µ–Ω—å—à–∏—Ç–µ `k` –∏ —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–æ–≤ –≤ `hybrid.py`.  
- –í –æ—Ç—á—ë—Ç—ã –∏ –ª–æ–≥–∏ **–Ω–µ** –ø–æ–ø–∞–¥–∞—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç/–ø–∞—Å–ø–æ—Ä—Ç–æ–≤ (–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ).

---

## üó∫Ô∏è Roadmap

- Reranker –Ω–∞ **cross‚Äëencoder** (MS‚ÄëMARCO).  
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ **NeMo Guardrails flows**.  
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏/—Å—Ç–∏–ª—è.  
- –ú—É–ª—å—Ç–∏‚Äë–∏–Ω–¥–µ–∫—Å (–ø—Ä–æ–¥—É–∫—Ç—ã/–ø—Ä–æ—Ü–µ—Å—Å—ã/—Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã) —Å –≤–∑–≤–µ—à–∏–≤–∞–Ω–∏–µ–º.

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT ‚Äî –¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫–∏, —Ä–∞—Å—à–∏—Ä—è–π—Ç–µ, –ø—Ä–∏—Å—ã–ª–∞–π—Ç–µ PR.

---

### –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- –ö–æ–º–∞–Ω–¥–∞ GigaChat –∑–∞ API –∏ –º–æ–¥–µ–ª–∏.  
- –°–æ–æ–±—â–µ—Å—Ç–≤–æ Streamlit –∑–∞ –ø—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π UI‚Äë—Å—Ç–µ–∫.  
- –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –ø–æ RAG/Guardrails –∑–∞ best‚Äëpractices.

